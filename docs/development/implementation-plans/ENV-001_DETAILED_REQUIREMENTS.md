# ENV-001 éš”ç¦»ç¯å¢ƒè¯¦ç»†éœ€æ±‚è§„æ ¼ä¹¦

## ğŸ“‹ éœ€æ±‚æ¦‚è¿°

### 1.1 éœ€æ±‚èƒŒæ™¯

åœ¨å½“å‰çš„ ptest æµ‹è¯•æ¡†æ¶ä¸­ï¼Œæµ‹è¯•ç¯å¢ƒç®¡ç†åŠŸèƒ½å­˜åœ¨é‡å¤§ç¼ºé™·ã€‚ç°æœ‰çš„ `EnvironmentManager` ä»…æä¾›åŸºç¡€çš„ç›®å½•ç»“æ„åˆ›å»ºï¼Œæ— æ³•å®ç°çœŸæ­£çš„ç¯å¢ƒéš”ç¦»ï¼Œå¯¼è‡´å¤šä¸ªæµ‹è¯•ç¯å¢ƒä¹‹é—´å¯èƒ½å­˜åœ¨ç›¸äº’å½±å“çš„é—®é¢˜ã€‚

**å½“å‰é—®é¢˜**:
- ç¼ºä¹çœŸæ­£çš„ç¯å¢ƒéš”ç¦»æœºåˆ¶
- ä¾èµ–åŒ…ç‰ˆæœ¬å†²çªé—®é¢˜
- è¿›ç¨‹é—´ç›¸äº’å¹²æ‰°
- ç½‘ç»œç«¯å£å†²çª
- èµ„æºç«äº‰å¯¼è‡´çš„æµ‹è¯•ä¸ç¨³å®š

### 1.2 ä¸šåŠ¡ä»·å€¼

å®ç°å®Œæ•´çš„ç¯å¢ƒéš”ç¦»å°†å¸¦æ¥ä»¥ä¸‹æ ¸å¿ƒä»·å€¼ï¼š

1. **æµ‹è¯•å¯é æ€§æå‡**ï¼šæ¶ˆé™¤ç¯å¢ƒé—´ç›¸äº’å½±å“ï¼Œç¡®ä¿æµ‹è¯•ç»“æœçš„å¯é‡å¤æ€§
2. **å¹¶å‘æ‰§è¡Œèƒ½åŠ›**ï¼šæ”¯æŒå¤šç¯å¢ƒå¹¶è¡Œæµ‹è¯•ï¼Œå¤§å¹…æå‡æµ‹è¯•æ•ˆç‡
3. **èµ„æºä¼˜åŒ–ç®¡ç†**ï¼šç²¾ç¡®æ§åˆ¶æµ‹è¯•ç¯å¢ƒçš„èµ„æºä½¿ç”¨å’Œç”Ÿå‘½å‘¨æœŸ
4. **ä¼ä¸šçº§åº”ç”¨**ï¼šæ»¡è¶³å¤æ‚é¡¹ç›®çš„æµ‹è¯•éš”ç¦»éœ€æ±‚

### 1.3 èŒƒå›´ç•Œå®š

**åŒ…å«èŒƒå›´**:
- Python è™šæ‹Ÿç¯å¢ƒéš”ç¦»å®ç°
- è¿›ç¨‹çº§éš”ç¦»ç®¡ç†
- ç½‘ç»œç«¯å£éš”ç¦»åˆ†é…
- ä¾èµ–åŒ…ç‰ˆæœ¬éš”ç¦»
- ç¯å¢ƒç”Ÿå‘½å‘¨æœŸç®¡ç†
- èµ„æºé™åˆ¶å’Œç›‘æ§

**æ’é™¤èŒƒå›´**:
- æ“ä½œç³»ç»Ÿçº§è™šæ‹ŸåŒ–
- ç¡¬ä»¶è™šæ‹ŸåŒ–
- åˆ†å¸ƒå¼ç¯å¢ƒç®¡ç†ï¼ˆåç»­ç‰ˆæœ¬è€ƒè™‘ï¼‰
- äº‘ç¯å¢ƒé›†æˆï¼ˆåç»­ç‰ˆæœ¬è€ƒè™‘ï¼‰

## ğŸ¯ åŠŸèƒ½éœ€æ±‚è¯¦è¿°

### 2.1 æ–‡ä»¶ç³»ç»Ÿéš”ç¦»éœ€æ±‚

#### 2.1.1 åŸºç¡€éœ€æ±‚
**éœ€æ±‚ID**: ENV-001-FS-001  
**ä¼˜å…ˆçº§**: é«˜  
**æè¿°**: ä¸ºæ¯ä¸ªæµ‹è¯•ç¯å¢ƒæä¾›ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿç©ºé—´

**åŠŸèƒ½è¦æ±‚**:
- ç‹¬ç«‹çš„æ ¹ç›®å½•ç»“æ„
- å®Œå…¨éš”ç¦»çš„ä¸´æ—¶æ–‡ä»¶ç©ºé—´
- ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ç®¡ç†
- å®‰å…¨çš„æ–‡ä»¶æƒé™æ§åˆ¶

**éªŒæ”¶æ ‡å‡†**:
```python
# ç¤ºä¾‹éªŒæ”¶æµ‹è¯•
def test_filesystem_isolation():
    env1 = framework.create_environment("/tmp/env1", isolation="virtualenv")
    env2 = framework.create_environment("/tmp/env2", isolation="virtualenv")
    
    # ç¯å¢ƒé—´æ–‡ä»¶ç³»ç»Ÿå®Œå…¨éš”ç¦»
    assert not env1.path.exists() or not env2.path.exists() or env1.path != env2.path
    
    # ä¸´æ—¶æ–‡ä»¶ä¸ç›¸äº’å½±å“
    temp1 = env1.create_temp_file("test.txt", "content1")
    temp2 = env2.create_temp_file("test.txt", "content2")
    
    assert temp1.read_text() == "content1"
    assert temp2.read_text() == "content2"
```

#### 2.1.2 å¢å¼ºéœ€æ±‚
**éœ€æ±‚ID**: ENV-001-FS-002  
**ä¼˜å…ˆçº§**: ä¸­  
**æè¿°**: æä¾›æ–‡ä»¶ç³»ç»Ÿé…é¢å’Œç›‘æ§åŠŸèƒ½

**åŠŸèƒ½è¦æ±‚**:
- ç£ç›˜ç©ºé—´é…é¢é™åˆ¶
- æ–‡ä»¶æ•°é‡é™åˆ¶
- å­˜å‚¨ä½¿ç”¨ç›‘æ§
- è‡ªåŠ¨æ¸…ç†æœºåˆ¶

### 2.2 è¿›ç¨‹éš”ç¦»éœ€æ±‚

#### 2.2.1 åŸºç¡€è¿›ç¨‹ç®¡ç†
**éœ€æ±‚ID**: ENV-001-PROC-001  
**ä¼˜å…ˆçº§**: é«˜  
**æè¿°**: å®ç°æµ‹è¯•ç¯å¢ƒé—´çš„è¿›ç¨‹éš”ç¦»

**åŠŸèƒ½è¦æ±‚**:
- è¿›ç¨‹å‘½åç©ºé—´éš”ç¦»
- PID æ–‡ä»¶ç®¡ç†
- ä¼˜é›…çš„è¿›ç¨‹å¯åŠ¨å’Œåœæ­¢
- è¿›ç¨‹çŠ¶æ€ç›‘æ§

**éªŒæ”¶æ ‡å‡†**:
```python
def test_process_isolation():
    env = framework.create_environment("/tmp/test_env", isolation="virtualenv")
    
    # å¯åŠ¨æµ‹è¯•è¿›ç¨‹
    process = env.start_process(["python", "-c", "import time; time.sleep(10)"])
    assert process.is_alive()
    
    # è¿›ç¨‹åœ¨æ­£ç¡®ç¯å¢ƒä¸­è¿è¡Œ
    assert process.environment == env
    
    # ä¼˜é›…åœæ­¢
    success = process.stop(timeout=5)
    assert success
    assert not process.is_alive()
```

#### 2.2.2 è¿›ç¨‹èµ„æºç®¡ç†
**éœ€æ±‚ID**: ENV-001-PROC-002  
**ä¼˜å…ˆçº§**: ä¸­  
**æè¿°**: æä¾›è¿›ç¨‹çº§åˆ«çš„èµ„æºç®¡ç†

**åŠŸèƒ½è¦æ±‚**:
- CPU ä½¿ç”¨ç‡é™åˆ¶
- å†…å­˜ä½¿ç”¨é™åˆ¶
- è¿›ç¨‹æ•°é‡é™åˆ¶
- èµ„æºä½¿ç”¨ç›‘æ§

### 2.3 ç½‘ç»œéš”ç¦»éœ€æ±‚

#### 2.3.1 ç«¯å£éš”ç¦»
**éœ€æ±‚ID**: ENV-001-NET-001  
**ä¼˜å…ˆçº§**: é«˜  
**æè¿°**: ä¸ºæ¯ä¸ªæµ‹è¯•ç¯å¢ƒåˆ†é…ç‹¬ç«‹çš„ç½‘ç»œç«¯å£èŒƒå›´

**åŠŸèƒ½è¦æ±‚**:
- åŠ¨æ€ç«¯å£åˆ†é…
- ç«¯å£å†²çªæ£€æµ‹
- ç«¯å£èŒƒå›´ç®¡ç†
- ç½‘ç»œè®¿é—®æ§åˆ¶

**éªŒæ”¶æ ‡å‡†**:
```python
def test_network_isolation():
    env1 = framework.create_environment("/tmp/env1", isolation="virtualenv")
    env2 = framework.create_environment("/tmp/env2", isolation="virtualenv")
    
    # åˆ†é…ä¸åŒçš„ç«¯å£èŒƒå›´
    port1 = env1.allocate_port()
    port2 = env2.allocate_port()
    
    assert port1 != port2
    assert env1.is_port_available(port1)
    assert env2.is_port_available(port2)
```

#### 2.3.2 ç½‘ç»œè®¿é—®æ§åˆ¶
**éœ€æ±‚ID**: ENV-001-NET-002  
**ä¼˜å…ˆçº§**: ä¸­  
**æè¿°**: æä¾›ç½‘ç»œè®¿é—®æ§åˆ¶å’Œå®‰å…¨éš”ç¦»

**åŠŸèƒ½è¦æ±‚**:
- é˜²ç«å¢™è§„åˆ™ç®¡ç†
- ç½‘ç»œè®¿é—®ç™½åå•/é»‘åå•
- DNS è§£æéš”ç¦»
- ç½‘ç»œæµé‡ç›‘æ§

### 2.4 ä¾èµ–åŒ…éš”ç¦»éœ€æ±‚

#### 2.4.1 Python åŒ…éš”ç¦»
**éœ€æ±‚ID**: ENV-001-DEP-001  
**ä¼˜å…ˆçº§**: é«˜  
**æè¿°**: å®ç°PythonåŒ…çš„å®Œå…¨éš”ç¦»

**åŠŸèƒ½è¦æ±‚**:
- ç‹¬ç«‹çš„Pythonè™šæ‹Ÿç¯å¢ƒ
- åŒ…ç‰ˆæœ¬ç®¡ç†
- ä¾èµ–å†²çªè§£å†³
- åŒ…å®‰è£…å’Œå¸è½½

**éªŒæ”¶æ ‡å‡†**:
```python
def test_package_isolation():
    env = framework.create_environment("/tmp/test_env", isolation="virtualenv")
    
    # å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„åŒ…
    env.install_package("requests==2.25.0")
    installed_packages = env.get_installed_packages()
    assert "requests" in installed_packages
    assert installed_packages["requests"] == "2.25.0"
    
    # éªŒè¯åŒ…éš”ç¦»
    import sys
    assert "requests" not in sys.modules  # ä¸»ç¯å¢ƒä¸å—å½±å“
```

#### 2.4.2 ä¾èµ–ç®¡ç†
**éœ€æ±‚ID**: ENV-001-DEP-002  
**ä¼˜å…ˆçº§**: ä¸­  
**æè¿°**: æä¾›æ™ºèƒ½çš„ä¾èµ–ç®¡ç†åŠŸèƒ½

**åŠŸèƒ½è¦æ±‚**:
- requirements.txt æ”¯æŒ
- ä¾èµ–å›¾åˆ†æ
- ç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥
- è‡ªåŠ¨ä¾èµ–è§£æ

## âš™ï¸ éåŠŸèƒ½éœ€æ±‚

### 3.1 æ€§èƒ½éœ€æ±‚

#### 3.1.1 å“åº”æ—¶é—´éœ€æ±‚
**éœ€æ±‚ID**: ENV-001-PERF-001  
**ä¼˜å…ˆçº§**: é«˜  
**æè¿°**: ç¯å¢ƒæ“ä½œå“åº”æ—¶é—´è¦æ±‚

**æ€§èƒ½æŒ‡æ ‡**:
- ç¯å¢ƒåˆ›å»ºæ—¶é—´: < 30ç§’
- ç¯å¢ƒå¯åŠ¨æ—¶é—´: < 10ç§’
- åŒ…å®‰è£…æ—¶é—´: < 60ç§’ (10ä¸ªåŒ…)
- ç¯å¢ƒæ¸…ç†æ—¶é—´: < 15ç§’

#### 3.1.2 èµ„æºä½¿ç”¨æ•ˆç‡
**éœ€æ±‚ID**: ENV-001-PERF-002  
**ä¼˜å…ˆçº§**: ä¸­  
**æè¿°**: èµ„æºä½¿ç”¨æ•ˆç‡è¦æ±‚

**æ€§èƒ½æŒ‡æ ‡**:
- åŸºç¡€ç¯å¢ƒå†…å­˜å ç”¨: < 50MB
- æ¯ä¸ªæµ‹è¯•å¯¹è±¡å†…å­˜å¼€é”€: < 10MB
- CPU ä½¿ç”¨ç‡: < 5% (ç©ºé—²æ—¶)

### 3.2 å®‰å…¨éœ€æ±‚

#### 3.2.1 éš”ç¦»å®‰å…¨æ€§
**éœ€æ±‚ID**: ENV-001-SEC-001  
**ä¼˜å…ˆçº§**: é«˜  
**æè¿°**: ç¡®ä¿ç¯å¢ƒé—´çš„å®‰å…¨éš”ç¦»

**å®‰å…¨è¦æ±‚**:
- æ–‡ä»¶è®¿é—®æƒé™æ§åˆ¶
- è¿›ç¨‹é—´é€šä¿¡éš”ç¦»
- ç½‘ç»œè®¿é—®éš”ç¦»
- æ•°æ®æ³„éœ²é˜²æŠ¤

#### 3.2.2 æƒé™ç®¡ç†
**éœ€æ±‚ID**: ENV-001-SEC-002  
**ä¼˜å…ˆçº§**: ä¸­  
**æè¿°**: æä¾›ç»†ç²’åº¦çš„æƒé™æ§åˆ¶

**æƒé™è¦æ±‚**:
- æ–‡ä»¶è¯»å†™æƒé™
- ç½‘ç»œè®¿é—®æƒé™
- ç³»ç»Ÿèµ„æºä½¿ç”¨æƒé™
- ç¯å¢ƒç®¡ç†æƒé™

### 3.3 å…¼å®¹æ€§éœ€æ±‚

#### 3.3.1 å¹³å°å…¼å®¹æ€§
**éœ€æ±‚ID**: ENV-001-COMP-001  
**ä¼˜å…ˆçº§**: é«˜  
**æè¿°**: è·¨å¹³å°å…¼å®¹æ€§è¦æ±‚

**æ”¯æŒå¹³å°**:
- Linux (Ubuntu 18.04+, CentOS 7+)
- macOS (10.15+)
- Windows (10+)

#### 3.3.2 Pythonç‰ˆæœ¬å…¼å®¹æ€§
**éœ€æ±‚ID**: ENV-001-COMP-002  
**ä¼˜å…ˆçº§**: é«˜  
**æè¿°**: Pythonç‰ˆæœ¬å…¼å®¹æ€§è¦æ±‚

**æ”¯æŒç‰ˆæœ¬**:
- Python 3.8+
- Python 3.9
- Python 3.10
- Python 3.11

## ğŸš§ çº¦æŸæ¡ä»¶

### 4.1 æŠ€æœ¯çº¦æŸ

#### 4.1.1 ä¾èµ–çº¦æŸ
- **å…è®¸çš„å¤–éƒ¨ä¾èµ–**: `virtualenv`, `docker`, `requests`
- **ç¦æ­¢ä½¿ç”¨çš„ä¾èµ–**: éœ€è¦ç³»ç»Ÿç‰¹æƒçš„å·¥å…·
- **Pythonç‰ˆæœ¬è¦æ±‚**: >= 3.8

#### 4.1.2 æ¶æ„çº¦æŸ
- å¿…é¡»ä¿æŒç°æœ‰APIçš„å‘åå…¼å®¹æ€§
- æ–°åŠŸèƒ½å¿…é¡»é€šè¿‡é…ç½®å¯ç”¨
- ä¸èƒ½ç ´åç°æœ‰çš„æµ‹è¯•ç”¨ä¾‹

### 4.2 èµ„æºçº¦æŸ

#### 4.2.1 ç¡¬ä»¶è¦æ±‚
- **æœ€ä½å†…å­˜**: 4GB RAM
- **æ¨èå†…å­˜**: 8GB RAM
- **ç£ç›˜ç©ºé—´**: 10GB å¯ç”¨ç©ºé—´

#### 4.2.2 ç½‘ç»œè¦æ±‚
- éœ€è¦äº’è”ç½‘è¿æ¥ï¼ˆç”¨äºåŒ…å®‰è£…ï¼‰
- æ”¯æŒHTTP/HTTPSä»£ç†é…ç½®

### 4.3 æ—¶é—´çº¦æŸ

#### 4.3.1 å¼€å‘æ—¶é—´çº¿
- **ç¬¬ä¸€é˜¶æ®µ**: 4å‘¨ (Virtualenvéš”ç¦»)
- **ç¬¬äºŒé˜¶æ®µ**: 4å‘¨ (è¿›ç¨‹å’Œç½‘ç»œéš”ç¦»)
- **ç¬¬ä¸‰é˜¶æ®µ**: 4å‘¨ (Dockeræ”¯æŒå’Œä¼˜åŒ–)

#### 4.3.2 é‡Œç¨‹ç¢‘è¦æ±‚
- Week 4: åŸºç¡€éš”ç¦»åŠŸèƒ½å¯ç”¨
- Week 8: å®Œæ•´éš”ç¦»åŠŸèƒ½æµ‹è¯•
- Week 12: ç”Ÿäº§ç¯å¢ƒå°±ç»ª

## ğŸ“– ç”¨æˆ·æ•…äº‹å’ŒéªŒæ”¶æ ‡å‡†

### 5.1 ç”¨æˆ·æ•…äº‹

#### ç”¨æˆ·æ•…äº‹ 1: ç‹¬ç«‹æµ‹è¯•ç¯å¢ƒ
**ä½œä¸º** æµ‹è¯•å·¥ç¨‹å¸ˆ  
**æˆ‘æƒ³è¦** ä¸ºæ¯ä¸ªæµ‹è¯•å¥—ä»¶åˆ›å»ºå®Œå…¨éš”ç¦»çš„Pythonç¯å¢ƒ  
**ä»¥ä¾¿** é¿å…ä¾èµ–åŒ…ç‰ˆæœ¬å†²çªå’Œæµ‹è¯•ç›¸äº’å½±å“

**éªŒæ”¶æ ‡å‡†**:
- å¯ä»¥å¿«é€Ÿåˆ›å»ºéš”ç¦»çš„Pythonè™šæ‹Ÿç¯å¢ƒ
- å¯ä»¥ç‹¬ç«‹å®‰è£…å’Œç®¡ç†åŒ…ä¾èµ–
- ç¯å¢ƒé—´å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å½±å“

#### ç”¨æˆ·æ•…äº‹ 2: å¹¶è¡Œæµ‹è¯•æ‰§è¡Œ
**ä½œä¸º** DevOpså·¥ç¨‹å¸ˆ  
**æˆ‘æƒ³è¦** åŒæ—¶è¿è¡Œå¤šä¸ªæµ‹è¯•ç¯å¢ƒ  
**ä»¥ä¾¿** æé«˜æµ‹è¯•æ‰§è¡Œæ•ˆç‡å’ŒCI/CDæµæ°´çº¿ååé‡

**éªŒæ”¶æ ‡å‡†**:
- æ”¯æŒè‡³å°‘10ä¸ªå¹¶å‘æµ‹è¯•ç¯å¢ƒ
- ç¯å¢ƒé—´èµ„æºä¸å†²çª
- å¯ä»¥åŠ¨æ€è°ƒæ•´å¹¶å‘æ•°é‡

#### ç”¨æˆ·æ•…äº‹ 3: ç½‘ç»œæœåŠ¡æµ‹è¯•
**ä½œä¸º** APIæµ‹è¯•å·¥ç¨‹å¸ˆ  
**æˆ‘æƒ³è¦** åœ¨éš”ç¦»çš„ç½‘ç»œç¯å¢ƒä¸­æµ‹è¯•æœåŠ¡  
**ä»¥ä¾¿** é¿å…ç«¯å£å†²çªå’Œç½‘ç»œå¹²æ‰°

**éªŒæ”¶æ ‡å‡†**:
- æ¯ä¸ªç¯å¢ƒæœ‰ç‹¬ç«‹çš„ç«¯å£èŒƒå›´
- å¯ä»¥é…ç½®ç½‘ç»œè®¿é—®è§„åˆ™
- æ”¯æŒæ¨¡æ‹Ÿç½‘ç»œæ•…éšœåœºæ™¯

### 5.2 éªŒæ”¶æ ‡å‡†çŸ©é˜µ

| éœ€æ±‚ID | éªŒæ”¶æ ‡å‡† | æµ‹è¯•æ–¹æ³• | é€šè¿‡æ ‡å‡† |
|--------|----------|----------|----------|
| ENV-001-FS-001 | ç‹¬ç«‹æ–‡ä»¶ç³»ç»Ÿ | åˆ›å»ºç¯å¢ƒå¹¶æ£€æŸ¥æ–‡ä»¶éš”ç¦» | ç¯å¢ƒé—´æ–‡ä»¶ä¸äº’ç›¸å½±å“ |
| ENV-001-PROC-001 | è¿›ç¨‹éš”ç¦» | å¯åŠ¨è¿›ç¨‹å¹¶æ£€æŸ¥éš”ç¦»æ€§ | è¿›ç¨‹åœ¨æ­£ç¡®ç¯å¢ƒä¸­è¿è¡Œ |
| ENV-001-NET-001 | ç½‘ç»œéš”ç¦» | åˆ†é…ç«¯å£å¹¶æ£€æŸ¥å†²çª | ç«¯å£ä¸å†²çªä¸”å¯è®¿é—® |
| ENV-001-DEP-001 | åŒ…éš”ç¦» | å®‰è£…åŒ…å¹¶æ£€æŸ¥ç‰ˆæœ¬ | åŒ…ç‰ˆæœ¬ç‹¬ç«‹ä¸”ä¸å†²çª |

### 5.3 æµ‹è¯•åœºæ™¯è®¾è®¡

#### åœºæ™¯1: åŸºç¡€éš”ç¦»åŠŸèƒ½æµ‹è¯•
```python
def test_basic_isolation():
    """æµ‹è¯•åŸºç¡€éš”ç¦»åŠŸèƒ½"""
    framework = TestFramework()
    
    # åˆ›å»ºå¤šä¸ªéš”ç¦»ç¯å¢ƒ
    env1 = framework.create_environment("/tmp/env1", isolation="virtualenv")
    env2 = framework.create_environment("/tmp/env2", isolation="virtualenv")
    
    # éªŒè¯æ–‡ä»¶ç³»ç»Ÿéš”ç¦»
    assert env1.path != env2.path
    assert env1.path.exists()
    assert env2.path.exists()
    
    # éªŒè¯åŒ…éš”ç¦»
    env1.install_package("requests==2.25.0")
    env2.install_package("requests==2.28.0")
    
    assert env1.get_package_version("requests") == "2.25.0"
    assert env2.get_package_version("requests") == "2.28.0"
```

#### åœºæ™¯2: å¹¶å‘æ‰§è¡Œæµ‹è¯•
```python
def test_concurrent_execution():
    """æµ‹è¯•å¹¶å‘æ‰§è¡Œèƒ½åŠ›"""
    framework = TestFramework()
    
    def create_and_test(env_id):
        env = framework.create_environment(f"/tmp/env_{env_id}")
        env.install_package("numpy")
        # æ‰§è¡Œä¸€äº›æµ‹è¯•æ“ä½œ
        return env.get_status()
    
    # å¹¶å‘åˆ›å»º10ä¸ªç¯å¢ƒ
    with ThreadPoolExecutor(max_workers=10) as executor:
        futures = [executor.submit(create_and_test, i) for i in range(10)]
        results = [future.result() for future in futures]
    
    # éªŒè¯æ‰€æœ‰ç¯å¢ƒéƒ½æ­£å¸¸
    assert all(result["status"] == "active" for result in results)
```

#### åœºæ™¯3: èµ„æºæ¸…ç†æµ‹è¯•
```python
def test_resource_cleanup():
    """æµ‹è¯•èµ„æºæ¸…ç†åŠŸèƒ½"""
    framework = TestFramework()
    
    # åˆ›å»ºç¯å¢ƒå¹¶å¯åŠ¨ä¸€äº›è¿›ç¨‹
    env = framework.create_environment("/tmp/cleanup_test")
    process = env.start_process(["python", "-c", "while True: pass"])
    
    # éªŒè¯è¿›ç¨‹æ­£åœ¨è¿è¡Œ
    assert process.is_alive()
    
    # æ¸…ç†ç¯å¢ƒ
    env.cleanup()
    
    # éªŒè¯èµ„æºå·²æ¸…ç†
    assert not process.is_alive()
    assert not env.path.exists()
```

## ğŸ“‹ é™„å½•

### A. æœ¯è¯­è¡¨

| æœ¯è¯­ | å®šä¹‰ |
|------|------|
| éš”ç¦»ç¯å¢ƒ | å®Œå…¨ç‹¬ç«‹çš„æµ‹è¯•æ‰§è¡Œç¯å¢ƒ |
| Virtualenv | Pythonè™šæ‹Ÿç¯å¢ƒæŠ€æœ¯ |
| è¿›ç¨‹éš”ç¦» | æ“ä½œç³»ç»Ÿçº§åˆ«çš„è¿›ç¨‹åˆ†ç¦»æœºåˆ¶ |
| ç½‘ç»œéš”ç¦» | ç½‘ç»œå±‚é¢çš„åˆ†ç¦»å’Œè®¿é—®æ§åˆ¶ |

### B. å‚è€ƒæ–‡æ¡£

1. [Python venvæ¨¡å—æ–‡æ¡£](https://docs.python.org/3/library/venv.html)
2. [Dockerå®¹å™¨åŒ–æŠ€æœ¯](https://docs.docker.com/)
3. [Linuxå‘½åç©ºé—´æ–‡æ¡£](https://man7.org/linux/man-pages/man7/namespaces.7.html)

### C. å˜æ›´å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´å†…å®¹ |
|------|------|------|----------|
| 1.0 | 2026-01-25 | cp | åˆå§‹ç‰ˆæœ¬ |

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ  
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸  
**å®æ–½çŠ¶æ€**: è®¡åˆ’ä¸­